# 股票投资学习笔记 01：投资基础理论

## 现代投资组合理论基础

### 有效市场假说（Efficient Market Hypothesis）

Eugene Fama提出的有效市场假说认为，在一个充分竞争的信息有效的市场中，资产价格已经充分反映了所有可获得的信息。根据信息集的不同，Fama区分了三种形式的EMH：弱式、半强式和强式。弱式有效市场认为当前价格已反映了所有历史信息，这意味着技术分析无法获得超额收益；半强式有效市场认为价格已反映了所有公开信息，这意味着基本面分析也无法获得超额收益；强式有效市场则认为价格已反映了所有公开和内幕信息，这意味着任何分析都无法获得超额收益。实证研究表明，市场在某些方面接近有效，但也存在持续的市场异常，这些异常对强式EMH提出了挑战。

### 现代投资组合理论

Harry Markowitz于1952年提出的现代投资组合理论（MPT）为投资决策提供了数学框架。该理论的核心观点是，投资者不应只关注单个资产的预期收益，而应同时考虑风险，并通过分散化来降低投资组合的整体风险。MPT表明，对于给定的风险水平，存在一个最优的投资组合权重分配，能够最大化预期收益。数学上，这可以通过在给定约束条件下求解目标函数来实现，即最大化组合的预期收益，或者最小化组合的风险（以方差或标准差来度量）。MPT的一个重要推论是，分散化可以降低组合的非系统性风险，因为不同资产之间的相关性会影响组合的整体波动。

### 资本资产定价模型（CAPM）

William Sharpe等人提出的资本资产定价模型（CAPM）是建立在MPT基础上的均衡模型，用于描述资产预期收益与风险之间的线性关系。CAPM的核心观点是，在均衡市场中，资产的预期超额收益（即资产预期收益减去无风险利率）与其系统性风险（Beta）成正比。系统性风险是指资产收益中与市场组合收益协方差的部分，它反映了资产对市场整体波动的敏感程度。无风险利率通常以短期国债利率作为代理。CAPM的一个重要推论是，在均衡市场中，投资者无法通过分散化消除系统性风险，因此需要为承担这种风险获得补偿。

## 风险的量化定义

### 方差与标准差

在金融学中，风险通常用收益的波动性来度量，最常用的指标是方差和标准差。方差是收益偏离其期望值的平方的平均，标准差是方差的平方根。对于离散的随机变量X，方差定义为Var(X) = E[(X - E[X])²]，其中E表示期望算子。对于连续的随机变量，方差可以表示为Var(X) = ∫(x - E[X])²f(x)dx，其中f(x)是概率密度函数。标准差σ = √Var(X)在金融中很常用，因为它与收益有相同的量纲，便于解释。标准差越大，表示收益的波动越大，投资风险越高。需要注意的是，方差和标准差度量的是总风险，包括系统性和非系统性风险。

### 协方差与相关系数

协方差度量两个随机变量如何一起变动，对于两个资产i和j，协方差定义为Cov(Ri, Rj) = E[(Ri - E[Ri])(Rj - E[Rj])]。协方差可以是正的、负的或零，正值表示两个资产倾向于同方向变动，负值表示反方向变动，零值表示不相关。相关系数是协方差的标准化形式，定义为Corr(Ri, Rj) = Cov(Ri, Rj) / (σiσj)，其中σi和σj分别是两个资产的标准差。相关系数的取值范围在-1到1之间，绝对值越接近1表示线性关系越强。相关系数在投资组合理论中很重要，因为资产之间的相关性会影响组合的整体风险，低相关或负相关的资产组合可以更有效地降低风险。

### 系统性风险与非系统性风险

总风险可以分解为系统性风险和非系统性风险。系统性风险是指不能通过分散化消除的风险，它来源于宏观经济因素、政治因素或其他对所有资产都产生影响的因素，系统性风险也称为市场风险或不可分散风险。非系统性风险是指可以通过分散化消除的风险，它来源于特定公司或行业的因素，非系统性风险也称为特质风险或可分散风险。根据投资组合理论，随着投资组合中资产数量的增加，非系统性风险可以通过分散化降低，而系统性风险则无法通过分散化消除，因此投资者需要为承担系统性风险获得补偿。

## 复利的数学推导

### 连续复利

在连续复利的情况下，资产价值随时间按指数增长。设初始投资为P0，年化收益率为r，投资年限为t，则t年后的资产价值Pt为Pt = P0 * e^(rt)，其中e是自然对数的底，约等于2.71828。这个公式假设收益是连续复利的，即利息在任何时刻都计入本金并立即开始产生利息。连续复利公式在理论分析中很常用，因为它便于求导和积分。对Pt关于t求导可以得到瞬时增长率为dPt/dt = rPt，这表示资产价值在任何时刻的增长率都与当前资产价值成正比，比例系数为年化收益率r。

### 离散复利

在实际中，复利通常是离散的，即利息按固定的时间间隔计入，如按年、按季度或按月。设每年计息次数为m，则每次计息的利率为r/m，t年后的资产价值Pt为Pt = P0 * (1 + r/m)^(mt)。年化收益率仍然为r，但由于复利效应，实际增长会略高于连续复利的情况。当m趋近于无穷大时，离散复利趋近于连续复利。离散复利公式在个人理财和实际投资中很常用，因为它更符合现实的计息方式。

### 投资期限的影响

投资期限对复利效应有显著影响。设年化收益率为r，投资期限为t年，则简单利息下的资产价值为P_simple = P0(1 + rt)，而复利下的资产价值为P_compound = P0(1 + r)^t。两者的差额为P_compound - P_simple = P0[(1 + r)^t - (1 + rt)]，这个差额就是复利效应带来的额外收益。当t=1时，复利效应为0；当t>1时，复利效应为正，且随着t的增加而增大；当r>0时，复利效应随着r的增加而增大。这表明复利效应在长期投资中更为重要，且在收益率较高时更为显著。因此，长期投资者应该更加重视复利效应，通过选择适当的投资工具和再投资策略来最大化复利收益。

## 价值投资的学术框架

### Graham与Dodd的内在价值理论

Benjamin Graham和David Dodd在1934年出版的《证券分析》中提出了内在价值的概念，这是价值投资理论的基石。内在价值是指资产基于其基本面因素所确定的客观价值，这些基本面因素包括公司的盈利能力、资产价值、成长潜力、风险水平等。Graham和Dodd认为，市场价格经常偏离内在价值，投资者的目标是识别价格低于内在价值的投资机会（安全边际），并等待市场纠正这种价格偏离。内在价值的评估方法包括贴现现金流法（DCF）、相对估值法（如市盈率、市净率）、资产价值法（如重置成本法）等。Graham和Dodd强调，内在价值的评估应该基于谨慎的假设和对公司基本面的深入分析。

### Buffett的投资哲学

Warren Buffett是Graham的学生，他的投资哲学在很大程度上建立在Graham的理论基础之上，但也有自己的发展和延伸。Buffett强调能力圈的概念，即只投资于自己真正理解的公司和行业，避免超出自己理解范围的投资。Buffett还强调质量优于价格，即愿意为高质量的公司支付合理的价格，而不是寻找低价买入一般的公司。Buffett的投资哲学还包括长期持有、忽略短期市场波动、专注于公司基本面而非技术面等原则。Buffett将这些原则总结为："以合理的价格购买优秀的公司，并长期持有。"

### 安全边际

安全边际是Graham提出的核心概念，是指市场价格低于内在价值的程度，安全边际为价格提供了一层保护，以抵御未来可能出现的负面事件或预测错误。安全边际的数学表达可以写为：安全边际 = 内在价值 - 市场价格，或者以百分比形式表示为：安全边际 = (内在价值 - 市场价格) / 内在价值。安全边际越大，投资的安全性越高，潜在收益也越大。Graham建议安全边际至少为1/3，即内在价值应该比市场价格高至少33%。安全边际的概念在投资决策中非常重要，因为未来是不确定的，任何预测都可能存在误差，安全边际为投资者提供了容错空间。

## 风险与收益的关系

### 资本市场线（SML）

资本市场线是CAPM的图形化表达，描述了在均衡市场中，资产预期收益与系统性风险（Beta）之间的线性关系。SML的方程可以写为：E[Ri] = Rf + βi(E[Rm] - Rf)，其中E[Ri]是资产i的预期收益，Rf是无风险利率，βi是资产i的Beta系数，E[Rm]是市场组合的预期收益。SML的斜率为市场风险溢价（E[Rm] - Rf），截距为无风险利率Rf。在SML上，Beta=1的资产是市场组合，Beta=0的资产是无风险资产，Beta>1的资产被称为激进型资产（系统性风险高于市场），Beta<1的资产被称为防御型资产（系统性风险低于市场）。SML的一个重要推论是，在均衡市场中，所有资产都应该位于SML上，如果某些资产位于SML上方，则表示它们被低估，如果位于SML下方，则表示它们被高估。

### 风险溢价的实证研究

学术界和业界对风险溢价进行了大量实证研究，结果因市场、时期和方法的不同而有所差异。美国股票市场的长期平均股权风险溢价（市场收益率减去无风险利率）大约在5-6%左右，但这在不同时期波动较大，在某些时期可能为负（如大萧条时期），在某些时期可能达到10%以上（如牛市时期）。其他国家和地区的股权风险溢价与美国有所不同，这可能与市场成熟度、政治环境、经济发展阶段等因素有关。风险溢价的研究还发现，小市值股票的风险溢价通常高于大市值股票，价值股的风险溢价通常高于成长股，这些现象被称为小市值效应和价值效应，它们是著名的市场异常，对有效市场假说提出了挑战。

## 行为金融学视角

### 有限理性

传统金融理论假设投资者是完全理性的，但行为金融学认为投资者的理性是有限的。有限理性是指投资者的认知能力、信息处理能力、自我控制能力都是有限的，这可能导致决策偏离理性最优。有限理性的表现形式包括：过度自信（投资者高估自己的知识和能力）、代表性启发（根据典型特征进行推断）、可得性启发（根据记忆中容易提取的信息进行推断）、锚定效应（过度依赖初始信息）等。有限理性可能导致投资者做出非最优的投资决策，如追涨杀跌、过度交易、持有亏损头寸过久等。

### 前景理论

前景理论由Kahneman和Tversky提出，是行为金融学的重要理论基础之一。前景理论认为，人们在面对风险决策时，不是根据最终财富的预期效用来进行决策，而是根据财富的变化（收益或损失）来进行决策，且对损失比对同等规模的收益更为敏感，这种现象被称为损失厌恶。前景理论还提出了价值函数和权重函数的概念，价值函数是S形的，在收益区间是凹的（风险厌恶），在损失区间是凸的（风险寻求），权重函数则表示人们倾向于高估小概率事件，低估大概率事件。前景理论可以解释很多市场异常，如股权溢价之谜、期权微笑、处置效应等。

### 羊群效应

羊群效应是指投资者倾向于跟随其他投资者的行为，而不是基于自己的独立分析进行决策。羊群效应可能来源于信息不对称（投资者认为其他人掌握了更多信息）、社会认同（希望与群体保持一致）、减少后悔（如果跟随多数人犯错，心理负担较轻）等因素。羊群效应可能导致市场泡沫和崩盘，当大量投资者盲目追逐热门资产时，会推高价格，形成泡沫，当泡沫破裂时，投资者恐慌性抛售，导致市场崩盘。羊群效应在金融市场（特别是新兴市场）中非常明显，是市场波动和低效率的重要来源之一。

## 本节要点总结

1. **理论基础**：现代投资组合理论、有效市场假说、CAPM等经典理论为投资决策提供了数学框架
2. **风险量化**：方差、标准差、协方差、相关系数等量化工具用于度量和分析投资风险
3. **复利推导**：复利的数学推导展示了长期投资的强大力量，投资期限越长、收益率越高，复利效应越显著
4. **价值投资框架**：Graham与Dodd的内在价值理论、Buffett的投资哲学、安全边际等构成了价值投资的学术基础
5. **风险收益关系**：资本市场线、风险溢价等实证研究描述了风险与收益的权衡关系
6. **行为金融**：有限理性、前景理论、羊群效应等行为因素解释了投资者的非理性行为和市场异常

## 思考题

1. 如何用数学方式推导并证明分散化可以降低非系统性风险？
2. CAPM的假设前提是什么？这些假设在现实中是否成立？
3. 行为金融学如何解释传统金融理论无法解释的市场异常？
4. 价值投资的核心原则（如安全边际）在现代量化投资中是否仍然适用？
5. 如何将现代投资组合理论应用到个人的实际投资决策中？

---

下一篇：财务报表分析
